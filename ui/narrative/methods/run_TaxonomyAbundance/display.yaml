#
# define display information
#
name: Generate Taxonomy Abundance Barplot

tooltip: |
    Creates a relative abundance bar chart for taxa at the specified taxonomic level, along with optional grouping of bars based on sample data.

screenshots: []

icon: icon.png

#
# define a set of similar apps that might be useful to the user
#
suggestions:
    apps:
        related:
            [app1, app2]
        next:
            [app3, app4]

#
# Configure the display and description of parameters
#
parameters :
    amplicon_matrix_ref :
        ui-name : |
            Amplicon Matrix
        short-hint : |
            AmpliconMatrix with raw count data
        long-hint  : |
            AmpliconMatrix with raw count data

    attri_mapping_ref:
        ui-name: |
            Metadata AttributeMapping
        short-hint: |
            AttributeMapping where metadata for grouping is stored.
        long-hint: |
            This is optional, but required if grouping samples by sample data.

    threshold:
        ui-name: |
            Cutoff
        short-hint: |
            The relative abundance threshold below which taxa will be lumped into the 'Other' category. 
        long-hint: |
            The relative abundance threshold below which taxa will be lumped into the 'Other' category.

    taxonomy_level:
        ui-name: |
            Taxonomic Level
        short-hint: |
            1-6
        long-hint: |
            Abundance of taxa will be summed and plotted at the specified taxonomic level:
            1)Domain 2)Phylum 3)Class 4)Order 5)Family 6)Genus

    meta_group:
        ui-name: |
            Metadata Grouping Column Name
        short-hint: |
            Bars will be plotted grouped by sample data in specified column. 
        long-hint: |
            Bars will be plotted grouped by sample data in specified column.

parameter-groups :
    grouping_label:
        ui-name : Meta Group
        short-hint :  Select an attribute to group by

description : |
    <p>This method creates a relative abundance bar graph for taxa and groups based on metadata criteria</p>
    <p>If the user chooses "3)Class" for the Taxonomic Level, the taxonomic strings will consist of the Domain, Phylum, and Class.</p>
